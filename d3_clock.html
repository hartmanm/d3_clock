<!DOCTYPE html>
<!--
Copyright (c) 2020 Michael Neill Hartman. All rights reserved.
-->
<html lang="en">
<head>
<title>d3_project</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://d3js.org/d3.v5.min.js"></script>
<style>
.header{padding: 0px; text-align: center; color: #9d9d9d; background-color: #101010;}
div{justify-items: center; overflow:hidden; width:100%;padding: 0px 0px;}
/*(ddiv{margin-left: auto; margin-right:auto;}*/
body{background:#101010;}
svg{margin: 40, 40, 40, 40;}
h1{margin-left: auto; margin-right:auto; text-align: center; color: #9d9d9d;}
</style>
</head>
<body>
<div id=main>
<svg id=seconds_view></svg>
<svg id=minutes_view></svg>
<svg id=hours_view></svg>
<!--
<svg id=title_view></svg>
-->
<h1>This is your life.  Time is flying by.</h1>
<h1 id=basis></h1>
</div>
<!--
<iframe id=seconds><svg id=seconds_view></svg></iframe>
<iframe id=minutes><svg id=minutes_view></svg></iframe>
<iframe id=hours><svg id=hours_view></svg></iframe>
-->
<script>
var rawData = [
{minute: '1',value: 60},
{minute: '2',value: 60},
{minute: '3',value: 60},
{minute: '4',value: 60},
{minute: '5',value: 60},
{minute: '6',value: 60},
{minute: '7',value: 60},
{minute: '8',value: 60},
{minute: '9',value: 60},
{minute: '10',value: 60},

{minute: '11',value: 60},
{minute: '12',value: 60},
{minute: '13',value: 60},
{minute: '14',value: 60},
{minute: '15',value: 60},
{minute: '16',value: 60},
{minute: '17',value: 60},
{minute: '18',value: 60},
{minute: '19',value: 60},
{minute: '20',value: 60},

{minute: '21',value: 60},
{minute: '22',value: 60},
{minute: '23',value: 60},
{minute: '24',value: 60},
{minute: '25',value: 60},
{minute: '26',value: 60},
{minute: '27',value: 60},
{minute: '28',value: 60},
{minute: '29',value: 60},
{minute: '30',value: 60},

{minute: '31',value: 60},
{minute: '32',value: 60},
{minute: '33',value: 60},
{minute: '34',value: 60},
{minute: '35',value: 60},
{minute: '36',value: 60},
{minute: '37',value: 60},
{minute: '38',value: 60},
{minute: '39',value: 60},
{minute: '40',value: 60},

{minute: '41',value: 60},
{minute: '42',value: 60},
{minute: '43',value: 60},
{minute: '44',value: 60},
{minute: '45',value: 60},
{minute: '46',value: 60},
{minute: '47',value: 60},
{minute: '48',value: 60},
{minute: '49',value: 60},
{minute: '50',value: 60},

{minute: '51',value: 60},
{minute: '52',value: 60},
{minute: '53',value: 60},
{minute: '54',value: 60},
{minute: '55',value: 60},
{minute: '56',value: 60},
{minute: '57',value: 60},
{minute: '58',value: 60},
{minute: '59',value: 60},
{minute: '60',value: 60}
]
var hourData = [
{minute: '1',value: 60},
{minute: '2',value: 60},
{minute: '3',value: 60},
{minute: '4',value: 60},
{minute: '5',value: 60},
{minute: '6',value: 60},
{minute: '7',value: 60},
{minute: '8',value: 60},
{minute: '9',value: 60},
{minute: '10',value: 60},

{minute: '11',value: 60},
{minute: '12',value: 60},
{minute: '13',value: 60},
{minute: '14',value: 60},
{minute: '15',value: 60},
{minute: '16',value: 60},
{minute: '17',value: 60},
{minute: '18',value: 60},
{minute: '19',value: 60},
{minute: '20',value: 60},

{minute: '21',value: 60},
{minute: '22',value: 60},
{minute: '23',value: 60},
{minute: '24',value: 60}
]
var dayData = [
{minute: '1',value: 365},
{minute: '2',value: 365},
{minute: '3',value: 365},
{minute: '4',value: 365},
{minute: '5',value: 365},
{minute: '6',value: 365},
{minute: '7',value: 365},
{minute: '8',value: 365},
{minute: '9',value: 365},
{minute: '10',value: 365},

{minute: '11',value: 365},
{minute: '12',value: 365},
{minute: '13',value: 365},
{minute: '14',value: 365},
{minute: '15',value: 365},
{minute: '16',value: 365},
{minute: '17',value: 365},
{minute: '18',value: 365},
{minute: '19',value: 365},
{minute: '20',value: 365},

{minute: '21',value: 365},
{minute: '22',value: 365},
{minute: '23',value: 365},
{minute: '24',value: 365},
{minute: '25',value: 365},
{minute: '26',value: 365},
{minute: '27',value: 365},
{minute: '28',value: 365},
{minute: '29',value: 365},
{minute: '30',value: 365}
]
var input_life_expectancy_in_years=77;


function append_h1(parent,innerhtml){
var one = document.createElement("h1");
one.innerHTML = innerhtml;
parent.appendChild(one);
}

function display_seconds(){
var screen_width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
var screen_height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
var staticColor = 'rgb(119, 0, 255)';
var hoverColor = '#eec42d';
var tooltip = d3
  .select('body')
  .append('rect')
  .attr('class', 'd3-tooltip')
  .style('position', 'absolute')
  .style('z-index', '10')
  .style('visibility', 'hidden')
  .style('padding', '10px')
  .style('background', 'rgba(0,0,0,0.6)')
  .style('border-radius', '4px')
  .style('color', '#fff')


var data = rawData;
  
var width = screen_width 
var height = screen_height / 4

var   x = d3
  .scaleBand()
  .range([0, width])
  .domain(data.map(d => d.minute))
  .padding(0.2);

 var  y = d3
  .scaleLinear()
  .domain([0, d3.max(data, d => d.value)])
  .range([height, 0]);


    var svg = d3.select("#seconds_view")
        .attr("viewBox", [0, 0, width, height]);
    
        var start = new Date;
    start =start.getSeconds()

     rect = svg
        .selectAll('g')
        .data(data)
        .enter()
        .append('rect')
        .attr('fill', staticColor)
        .attr('x', (d, i) => x(d.minute))
        .attr('width', x.bandwidth()*0.75)
        .attr('y', d => y(0))
        .attr('height', d => height )
        .on('mouseover', function (d, i) {
            var now = new Date;
            now =Math.abs(now.getSeconds()-start)
            var inner;
            if(d.minute ==1){inner=`<div>${d.minute} second</div>`}
             if(d.minute !=1){inner=`<div>${d.minute} seconds</div>`}
            tooltip
              .html(
               // `<div>${d.minute}:${now}</div>`
              //  `<div>${d.minute}</div>`
            inner
        )
              .style('visibility', 'visible');
         //   d3.select(this).transition().attr('fill', hoverColor);
        })
        .on('mousemove', function () {
            tooltip
              .style('top', d3.event.pageY - 10 + 'px')
              .style('left', d3.event.pageX + 10 + 'px');
        })
        .on('mouseout', function () {
            tooltip.html(``).style('visibility', 'hidden');
        })
        // for interaction
        /*
        .on('mouseover', function (d, i) {
            var now = new Date;
            now =Math.abs(now.getSeconds()-start)
            tooltip
              .html(
                `<div>${d.minute}:${now}</div>`
              )
              .style('visibility', 'visible');
            d3.select(this).transition().attr('fill', hoverColor);
        })
        .on('mousemove', function () {
            tooltip
              .style('top', d3.event.pageY - 10 + 'px')
              .style('left', d3.event.pageX + 10 + 'px');
        })
        .on('mouseout', function () {
            tooltip.html(``).style('visibility', 'hidden');
            d3.select(this).transition().attr('fill', staticColor);
            //console.log(x(d.minute))
            // wipe rect d3.select(this).attr('height', y.height );
            // set to max height:
         //   d3.select(this).attr('x', (d, i) => x(d.minute))
        //    d3.select(this).attr('width', x.bandwidth()*0.75)
        //    d3.select(this).attr('y', 0)

        })
        .on('click', function () {
            tooltip.html(``).style('visibility', 'hidden');
            d3.select(this).transition().attr('fill', staticColor);
            //console.log(x(d.minute))
             d3.select(this).attr('height', y.height );
            //d3.select(this).attr('x', (d, i) => x(d.minute))
            //d3.select(this).attr('width', x.bandwidth()*0.75)
            //d3.select(this).attr('y',  y(0))
            //d3.select(this).attr('height', d => height )//- y(0))'
        })
        */


    rect.transition()
    .delay(function(d, i) { return i * 1000; })
    .on("start", function repeat() {



      
      var select = d3.active(this)
    //  console.log(select.data.i)
     // if(select.data.i == 60){display_seconds}
      select
        .transition()
        .ease(d3.easeLinear)
        .duration(1000)
        .attr('y', d => y(d.value))
        .attr('height', d => height )

          .transition()
          .duration(60000)
        //.duration(function(d, i) {var cur=60000 - (d.minutes * 1000);console.log(cur); return cur  })
        .attr('y', d => y(d.value))
        .attr('height', d => height )

          .transition()
          .attr('height', y.height )
          //d3.select('#seconds_view').html = ""
         // .on("start", display_seconds);
         .on("start", repeat);



      });

    }




function display_minutes(){


var screen_width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);

//var screen_width = window.availWidth;
var screen_height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);


var staticColor = 'rgb(119, 0, 255)';

var hoverColor = '#eec42d';


var tooltip = d3
  .select('body')
  .append('rect')
  .attr('class', 'd3-tooltip')
  .style('position', 'absolute')
  .style('z-index', '10')
  .style('visibility', 'hidden')
  .style('padding', '10px')
  .style('background', 'rgba(0,0,0,0.6)')
  .style('border-radius', '4px')
  .style('color', '#fff')


var data = rawData;
  
var width = screen_width
var height = screen_height / 6

var   x = d3
  .scaleBand()
  .range([0, width])
  .domain(data.map(d => d.minute))
  .padding(0.2);


 var  y = d3
  .scaleLinear()
  .domain([0, d3.max(data, d => d.value)])
  .range([height, 0]);



    var svg = d3.select("#minutes_view")
        .attr("viewBox", [0, 0, width, height]);
    
        var start = new Date;
    start =start.getSeconds()
    var minutes = 0;

    var rect = svg
        .selectAll('g')
        .data(data)
        .enter()
        .append('rect')
        .attr('fill', staticColor)
        .attr('x', (d, i) => x(d.minute))
        .attr('width', x.bandwidth()*0.75)
        .attr('y', d => y(0))
        .attr('height', d => height )//- y(0))
        .on('mouseover', function (d, i) {
            var now = new Date;
            now =Math.abs(now.getSeconds()-start)
            var inner;
            if(d.minute ==1){inner=`<div>${d.minute} minute</div>`}
             if(d.minute !=1){inner=`<div>${d.minute} minutes</div>`}
            tooltip
              .html(
               // `<div>${d.minute}:${now}</div>`
              //  `<div>${d.minute}</div>`
            inner
        )
              .style('visibility', 'visible');
        })
        .on('mousemove', function () {
            tooltip
              .style('top', d3.event.pageY - 10 + 'px')
              .style('left', d3.event.pageX + 10 + 'px');
        })
        .on('mouseout', function () {
            tooltip.html(``).style('visibility', 'hidden');
          //  d3.active(this).append('rect').attr('height', y.height )
        })

        
    


        rect.transition()
    .delay(function(d, i) { return i * 60000; })
    .on("start", function repeat() {

        d3.active(this)
        .transition()
        .ease(d3.easeLinear)
        .duration(60000)
        .attr('y', d => y(d.value))
        .attr('height', d => height )

          .transition()
        .duration(60000*60)
        .attr('y', d => y(d.value))
        .attr('height', d => height )



          .transition()
          .attr('height', y.height )
          .on("start", repeat);



      });

    }



    function display_hours(){


var screen_width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);

//var screen_width = window.availWidth;
var screen_height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);


var staticColor = 'rgb(119, 0, 255)';

var hoverColor = '#eec42d';


var tooltip = d3
  .select('body')
  .append('rect')
  .attr('class', 'd3-tooltip')
  .style('position', 'absolute')
  .style('z-index', '10')
  .style('visibility', 'hidden')
  .style('padding', '10px')
  .style('background', 'rgba(0,0,0,0.6)')
  .style('border-radius', '4px')
  .style('color', '#fff')


var data = hourData;
  
var width = screen_width
var height = screen_height / 8

var   x = d3
  .scaleBand()
  .range([0, width])
  .domain(data.map(d => d.minute))
  .padding(0.2);


 var  y = d3
  .scaleLinear()
  .domain([0, d3.max(data, d => d.value)])
  .range([height, 0]);



    var svg = d3.select("#hours_view")
        .attr("viewBox", [0, 0, width, height]);
    
        var start = new Date;
    start =start.getSeconds()
    var minutes = 0;

    var rect = svg
        .selectAll('g')
        .data(data)
        .enter()
        .append('rect')
        .attr('fill', staticColor)
        .attr('x', (d, i) => x(d.minute))
        .attr('width', x.bandwidth()*0.75)
        .attr('y', d => y(0))
        .attr('height', d => height )//- y(0))
        .on('mouseover', function (d, i) {
            var now = new Date;
            now =Math.abs(now.getSeconds()-start)
            var inner;
            if(d.minute ==1){inner=`<div>${d.minute} hour</div>`}
             if(d.minute !=1){inner=`<div>${d.minute} hours</div>`}
            tooltip
              .html(
               // `<div>${d.minute}:${now}</div>`
              //  `<div>${d.minute}</div>`
            inner
        )
              .style('visibility', 'visible');
          //  d3.select(this).transition().attr('fill', hoverColor);
        })
        .on('mousemove', function () {
            tooltip
              .style('top', d3.event.pageY - 10 + 'px')
              .style('left', d3.event.pageX + 10 + 'px');
        })
        .on('mouseout', function () {
            tooltip.html(``).style('visibility', 'hidden');
        })

    

        rect.transition()
    .delay(function(d, i) { return i * 60000*60; })
    .on("start", function repeat() {
        d3.active(this)
        .transition()
        .ease(d3.easeLinear)
        .duration(60000*60)
        .attr('y', d => y(d.value))
        .attr('height', d => height )

          .transition()
        .duration(60000*60*24)
        .attr('y', d => y(d.value))
        .attr('height', d => height )

          .transition()
          .attr('height', y.height )
          .on("start", repeat);



      });

    }


    



    function display_title(){


var screen_width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);

//var screen_width = window.availWidth;
var screen_height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);


var staticColor = 'rgb(119, 0, 255)';

var hoverColor = '#eec42d';


var tooltip = d3
  .select('body')
  .append('rect')
  .attr('class', 'd3-tooltip')
  .style('position', 'absolute')
  .style('z-index', '10')
  .style('visibility', 'hidden')
  .style('padding', '10px')
  .style('background', 'rgba(0,0,0,0.6)')
  .style('border-radius', '4px')
  .style('color', '#fff')


var data = rawData;
  
var width = screen_width
var height = screen_height / 8

var   x = d3
  .scaleBand()
  .range([0, width])
  .domain(data.map(d => d.minute))
  .padding(0.2);


 var  y = d3
  .scaleLinear()
  .domain([0, d3.max(data, d => d.value)])
  .range([height, 0]);


  var inner=`<h3>This is your life.  Time is flying by.</h3>`
    var svg = d3.select("#title_view")
        .attr("viewBox", [0, 0, width, height])
        .innerHtml(inner)
        .selectAll('g')
        .data(data)
        .enter()
        .text("This is your life.  Time is flying by.")
        .html(inner)

 // 
   // var rect = svg
   ///     .selectAll('g')
   //     .data(data)
   //     .enter()
   ///     .append('rect')
    //    .html(inner)


    }








display_seconds();
display_minutes();
display_hours();
//display_title();


</script>
</body>
</html>

